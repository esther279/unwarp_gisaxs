language: python
python:
  - 3.6
cache:
  directories:
    - $HOME/.cache/pip
    - $HOME/.ccache  # https://github.com/travis-ci/travis-ci/issues/5853

install:
  # Install this package and the packages listed in requirements.txt.
  - pip install .
  # Install extra requirements for running tests and building docs.
  - pip install -r requirements-dev.txt

env:
  global:
        # Doctr deploy key for ligerliu/unwarp_gisaxs
        - secure:
          "gAAAAABbkHsEN1NA09ZFLZ1E5KclvBrcsuVnPCo2jRvAom_t2bFYWBdY_0wsd_fdYjUJZhDWcxRu-l0-Vx0HVkZGOx-_3YE6mZeDJQUXPUiiM4aLt6KqrrDgWeeUqEMshdIhUfrQLcCYuB-_9Y1VBuZjpyTrB-VyYPYtNhTOVMHRbtiSUoddUYqhycMi89YZGI3S_NvLiLJGoZthQMma5LOVFcLEMrOdRh7m09R7LuhTYGT6CpOdeEiTs0ywt2T9ept2MalDfk_v0moKY8Gs22_96XfU1RGjXUEX8Qo4iMI0Fb5RXg0_D2rJG62-_vVwRIrnMBxkP6yantgyTP0UMIBrf_iPZpuLy2Zg-29kEa0qjA86gIG7_cgsUZd_wpX3RljMBYv5QuOgHT59KK-ZMxhQdnkiM23fBBXMVJCrWaXT2FZVL7DPpngxWoSpPHYnxZmxF34xjO3_gegtP-vVR8rUwpDe2cVkRMbKZ2mBSDSe1qlXHdDQpA0YUnXl9QI8A5peZny2gsWtUqvGwKGwYV8sZnYAqefvEQqTcowspSCIj3_jcWmAEsCgS6WA7wUldX4wkcUN7XeRjTOlXuBAcj2vJ0d7rG0NiQXJVXNH9PC5s7XJYd9LtlCoqR-xg2N-kAsHQHJbO4puxk0_mswZrhmWyabVkM48B9Cd5kcSvmfRuXg-UhiVEwNDjx_xgp1lEU4GyLKdaTY9hHCh4nsHbW1xaXcqzjSUV_G9VrKCwObXMqba1B0cwl7-7fb1cfEdpZYvoIqSKpRefVMbJITupQI2p5vUaRhzjBNpqYj3Kd2dWOqZ3kkIVdykw3jaJg-so0TrWA76fv2B1uGKsfVgLB7caepG6WUifpjMwRhySer06maa0mOxChz1wiusoJmSFXr8t5e3eTREYGTEDCyRT9JwFwirbCRoL5xkO_5mrxAeYC2BBB53hU8VDiaQmWM11Idz0961X_fai8I4BMMebXzdQ3huisMLsISTRrC1PruHqM20MDDgxXkNH3Py8lyChTLV3vxf3qTrf3yeZJ_SJfIW0pB4gmSrFQJUjbkb-8yI4cCq4gVuac2Zmj2-kkIrNwJyuIND4w_3Ouo7xbAU5De8BN3rDg26X4IbvOH0zu7YIw_xp8KNz5_kaWXga4GKko9yyc4dRCpvI-0GZB9dyCm-FmU30vqI04-hvNNBVGY1IM9dOPPdb4kqoZESRJEKhoXZhvJ4vZ6QBMD9dEcDa-lfZrfF8jaKnqPnKJL8581mjoRcXzJcTaiW8nQX-TrFeXpHpydC3UYue87-q3LS8TS_tr5qim3i7xVsG8dk9k5jwwAdu6iEVzpHZhkIKYHBnkfSP2OiHFY5U9Fix1lpsCfA7ZGEovWRqYWuFwHxll48_bsyFYhuyG61xaIWEGK_Wuvzn7Jb1LaXznkYTDQZuJHDLiqbCar3o5s3YTzwWXUBjxFwykPP37rF9W4eRbcaMlqRQkR23jKTQk8dIlHAoIQ0JM-nNrJr621EJLZQ3mxqXbJ9oSH8mSRtdiiKlU-_mJzKDhHlhlvobZkMVTNRcJLyI6vdxBzadQr9PzUFJWgHzxzUdqZp6tx_T-BtIF43PTWG26onz3pZorbNPL7nkZLzT3MDjLAX9yHXSx4X2T0-YZyQtoSyTInUIOZyQtKqMIoWAdoFG0BkTTe2HhwX7qQasiWKUlx5MtSuaJDRrTvN7JSmY1G36LCMSTgDzQfoB0VgL-erlcqQHT1L8yPWpiPG7buMmCcOA3_dMhbKLugRYs5U7DoKtaCs04bT3m--I_1EhyuzFHNWSRTp9uX-aMWynDxmZRMC17ccvqqbuo3s33h5q079QU2bc46WjLbmfUF6QJiTG16lvPmgM9uAgr_JQG5mRdLMQ8Kz8ZgO3gNqFwD4_1plsYjrJXhGmqhoY540SZ_bd7ORG9YTYBwVnhcBDqC2JuF_szMF92Usr4WtPtCStMPiIJORFxmIeQ7KnvSW7O-Wu3ctP_eecxX2kpQ0PEDQxDYjJdTo-YPMG8mN3bweEbZQhLI08AzEaxSB9fgIErC14uCSe7MeuJ1yh3OWHA6PTdpGlmc26YPNQcYJKA4xJgDSGQS9CVbJs_pHVFRrkQEvUs8WzY8W-_ZdZtwyY6oLcYcNSGRXd-qkbDdxR8VD-jOUAby-LajGMKlhOCvqOz6ahrf9J2_DfclMZBJhXsVbkJn99REATFrmzXEt2c5aYij5qcUreMleUwO2iUiN1wJAFMUGg8kgE2ZVobqRuO0bVHsKc1bIBQi7Bz4GxE4CpdqBhglYJRQNG9d_jSb4vnNgYNCkog5FLLL4_eCHUopB3cZ2qihtrOsybc2fURO5wA4volpEVGHmIzRRJQkuLnzYLUoZm0KPyZrJk8inlmCld6EunVFaBVGyAVNiastE8inCKE84ILurqdsAu9QyNDMK9j3TtLCVU2mc0G_VaNuhSSa7hRXbL080jpswk7Irmg7I6aBldCixV_BrGB_0cmymuiLha9ODq2M6JXjJrdZ4g3FgjBOPg56I3j26mXma256qsWxmaC4mPssSL7mCbPB9VhMR-grtmidDGAxjyrXvgo-ioKD27766N-yiVER20IWV7Wrt0gFaeOD6Rz03x-_GdvfWhv4Hju8c6cCu5SME5gQy1ohuwEAZKJe6aBZExOsA9-XbECq0dL0CLqE0YA0XW9jVnwQaxnToo-1UWlyY8o9llk2xAYTcOl_QnTjPbZPEy44Tb6T3xI4uTdMsAqc3XChYKnRCdYovDtDb_191t4xg2YQsG-hZx57XubsX2xt6MBdpbgkHjq_DdSnNDEG7d3UgFYVyAWoYM1nZJMTxIHh-uNeRqDwlVda877YW_JKgWuBIaJit3coeRWuE9i-TsiJ42eiAnmcjd1g10ZijBjgbjjYu80vkDTjJL-thJonbptQcyqswb0dUA7kdqRhSGOxRz0MyGKTimibqcjUJ1CZC5erAZEqlp3LJmnTq5bFiByIABlD0favVdcxJNYIjdvR6mWZyiGDje0EW5EheKlu85z2VenveEgx9UKlxRAF8RZSCsV89F7dQCcOsbdLqtFjWxRU8R-fu1tK8gyFqQp_JbyyJdF_CJtYGbPB4Nq7o54i6JkVCj-00Ts1f8hlARvmQtiAn0KrBilDylC9kcG-r8QAEYBh5l9B4GFddb7-HNAOyBnYRcdZ_qH0HB3UwoNScVqrrkolaiGJ81JaPoU0MnBQys6vvhMq2dIeUihehhBsJXkxq1bFvgSxY4AkdWNgVfVTtsFeqmMq05DTPmjs34quO0bdo_E1mCuT_uzV_S8PQlORKG6zhUhN-d5FVA_7Mp4RZKZGcKsIYtZVMn-Rj6M74TAVjmJbvJxVDiIlelt4ut01bWC0NkgMfucErsvCBICfEg7AfeFt_EzETlcmQvmg5pKTi-7rm7YvthieVdNCKJldcOREYJ9TRI9lLvXcuYZoT4pFoWHrTQVUNU8gvp2fjxmtKYaf-YQpg-o_yhYzCaAMmMrljpzdb-HRNRY_bBKlzWMWd-iEd6h68o8Ix6ULWk5sAV89sdRrUnAWoKCPxDhKgGnAkXfGv5J6CDDCUsiatl7SQOaFUTA6NRD8Q0N95TN39y4Wd_K4ETjrlMmzb0Oj9U4hAGWfveJrjSIE2VOhhGqwyih59SrWSkgRJOEjoXK_VBqOkIgBT7tmqh2BD9fRC4wlqvWKR4fGqqMAL47L2R9qSz2AwvI2wJeY1UiH2D5NQ9TQ_ZaDfPPkyizSbgpraI0OxHUf1pQlKPhFLVPqTG1N2sn079uUfjOdmTH9QWe0FoWmiIfPstCfoo2TKM0oiJU7m-uAad3E0O-5YE_k9iP0LyvyppKT1FExohhgndNrVEKFt-80Vqjry78zRCA1AALeHUW3FYbIAFFZuDWiRCyhUp24XGuPuJS4McfzSIUE2EQBeTpEIOpyRc5-_n6S21L6pxucB05L4v9FpGWO9H3kTwhHBERsG-UV8rd0QbW35zygSdsJJsppwgHFD1vdRguV-gBdHRVDPRMMsFjQAAUa3q8sW4LTO6UsIgRfJ2egIfQ0m7n1dkZRnC0TXX6fRRwCp8lg763tTC-7e8Ek-kg2TSOurhqOd_P30tSDXgQ5odu-MaCRoSoB0CQywhrdWcg8GQxclaCGhL8bbEJtNAHJe3Y-SS021vwTBSu_0SHytGMfM4V4Kg1yD9KhjsGFMToNc5j7OYkT4YfqI0v5fQgraSKBrPuHPDkQTw1658fp4axY7hHdWqZrJa8evzVIzNMnv34C0sFnCWyd9ONYw7NEBwdupAG9Wz_4srTwJ4qVfojBn9P0F5HnvQkXbQ9XjdSJKhwaIOL2KTzQDN1TwvgrthNjBvviD_oURJRVlpPoyoygZsM-LEf5_8yfnpDrLuSbvahyp-znHyA2HpEcVTx_gnM7CplDPH7-QWA=="
script:
  - coverage run -m pytest  # Run the tests and check for test coverage.
  - coverage report -m  # Generate test coverage report.
  - codecov  # Upload the report to codecov.
  #- flake8 --max-line-length=315  # Enforce code style (but relax line length limit a bit).
  - set -e
  - make -C docs html  # Build the documentation.
  - pip install doctr
  - doctr deploy --built-docs docs/build/html .
